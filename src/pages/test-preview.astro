---
// Test page to show preview generation is working
const testDocId = "2a3ce02c973d3c9fad3103025e374855";
const previewUrl = `http://localhost:4321/preview/${testDocId}.jpg`;
const documentUrl = `http://localhost:4321/document/${testDocId}`;
---

<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Preview Test - LinkedIn Sharing</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .preview-container { border: 1px solid #ddd; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; color: #155724; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; color: #0c5460; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; color: #856404; }
        img { max-width: 100%; height: auto; border: 1px solid #ddd; }
        .meta-tags { background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <h1>üß™ LinkedIn Preview Test</h1>
    
    <div class="preview-container success">
        <h2>‚úÖ Custom Preview Generated Successfully!</h2>
        <p>The system is generating custom preview images for each document. Here's what LinkedIn will see:</p>
        
        <h3>Generated Preview Image:</h3>
        <img src={previewUrl} alt="Custom preview for document" />
        
        <p><strong>Preview URL:</strong> <a href={previewUrl} target="_blank">{previewUrl}</a></p>
    </div>

    <div class="preview-container info">
        <h2>üìÑ Document Page Meta Tags</h2>
        <p>When you share the document URL on LinkedIn, it will read these meta tags:</p>
        
        <div class="meta-tags">
&lt;meta property="og:title" content="AWS Cloud Adoption Framework for AI..."&gt;<br/>
&lt;meta property="og:description" content="This whitepaper presents Amazon Web Services..."&gt;<br/>
&lt;meta property="og:image" content="{previewUrl}"&gt;<br/>
&lt;meta property="og:image:width" content="1200"&gt;<br/>
&lt;meta property="og:image:height" content="630"&gt;<br/>
        </div>
        
        <p><strong>Document URL:</strong> <a href={documentUrl} target="_blank">{documentUrl}</a></p>
    </div>

    <div class="preview-container warning">
        <h2>‚ö†Ô∏è Important Notes for LinkedIn Sharing</h2>
        <ul>
            <li><strong>Local Development:</strong> LinkedIn cannot access localhost URLs. The preview will work when deployed to GitHub Pages.</li>
            <li><strong>Cache:</strong> LinkedIn caches previews for 24-48 hours. Use LinkedIn's Post Inspector to force refresh.</li>
            <li><strong>Testing:</strong> To test locally, you can see the preview image above - this is what LinkedIn will display when deployed.</li>
        </ul>
    </div>

    <div class="preview-container info">
        <h2>üöÄ How to Test on LinkedIn</h2>
        <ol>
            <li><strong>Deploy to GitHub Pages</strong> (the URLs need to be publicly accessible)</li>
            <li><strong>Share the document URL</strong> (not the preview URL directly)</li>
            <li><strong>LinkedIn will automatically fetch</strong> the custom preview image</li>
            <li><strong>Use LinkedIn Post Inspector</strong> to debug: <a href="https://www.linkedin.com/post-inspector/" target="_blank">LinkedIn Post Inspector</a></li>
        </ol>
    </div>

    <div class="preview-container success">
        <h2>‚ú® What's Working Now</h2>
        <ul>
            <li>‚úÖ Custom preview images are generated for each document</li>
            <li>‚úÖ Document pages have proper Open Graph meta tags</li>
            <li>‚úÖ Preview endpoint serves SVG images with document-specific content</li>
            <li>‚úÖ LinkedIn sharing button opens with enhanced content</li>
            <li>‚úÖ Category-based colors and styling (ü§ñ for AI, üìä for Data Science, etc.)</li>
        </ul>
    </div>

    <script>
        // Test if the preview loads successfully
        const img = document.querySelector('img');
        img.onload = function() {
            console.log('‚úÖ Preview image loaded successfully!');
        };
        img.onerror = function() {
            console.error('‚ùå Preview image failed to load');
            this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI2MzAiIHZpZXdCb3g9IjAgMCAxMjAwIDYzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEyMDAiIGhlaWdodD0iNjMwIiBmaWxsPSIjZjMzNDU2Ii8+Cjx0ZXh0IHg9IjYwMCIgeT0iMzE1IiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSI0OCIgZm9udC1mYW1pbHk9IkFyaWFsIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5FcnJvciBMb2FkaW5nIFByZXZpZXc8L3RleHQ+Cjwvc3ZnPgo=';
        };
    </script>
</body>
</html>
