import{r as i}from"./index.CVf8TyFT.js";var y={exports:{}},u={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K=i,R=Symbol.for("react.element"),A=Symbol.for("react.fragment"),F=Object.prototype.hasOwnProperty,$=K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T={key:!0,ref:!0,__self:!0,__source:!0};function N(n,s,l){var t,d={},c=null,o=null;l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(o=s.ref);for(t in s)F.call(s,t)&&!T.hasOwnProperty(t)&&(d[t]=s[t]);if(n&&n.defaultProps)for(t in s=n.defaultProps,s)d[t]===void 0&&(d[t]=s[t]);return{$$typeof:R,type:n,key:c,ref:o,props:d,_owner:$.current}}u.Fragment=A;u.jsx=N;u.jsxs=N;y.exports=u;var e=y.exports;const B=({onKnowledgeGraphClick:n,onFilteredDocumentsChange:s})=>e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Document Library"}),e.jsx("p",{className:"text-gray-600",children:"Document library component will be implemented here."}),e.jsx("button",{onClick:n,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Open Knowledge Graph"})]}),H=({documents:n,width:s,height:l,onNodeClick:t,onNodeHover:d})=>e.jsxs("div",{className:"p-6",style:{width:s,height:l},children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Knowledge Graph"}),e.jsx("p",{className:"text-gray-600",children:"Knowledge graph component will be implemented here."}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Documents: ",n.length," | Size: ",s,"x",l]})]});class W extends i.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,l){console.error("ErrorBoundary caught an error:",s,l)}render(){return this.state.hasError?this.props.fallback||e.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800 mb-3",children:[e.jsx("span",{className:"text-lg",children:"âš ï¸"}),e.jsx("h3",{className:"font-semibold",children:"Something went wrong"})]}),e.jsx("p",{className:"text-red-700 text-sm mb-4",children:"An error occurred while rendering this component."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Try Again"})]}):this.props.children}}const z=({doc:n,isOpen:s,onClose:l})=>s?e.jsx("div",{className:"modal-overlay",onClick:l,children:e.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n.title||n.filename}),e.jsx("button",{onClick:l,className:"close-button",children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{className:"p-6 text-gray-600",children:"PDF modal component will be implemented here."}),e.jsxs("p",{className:"px-6 text-sm text-gray-500",children:["Document: ",n.filename]})]})]})}):null,U=({initialView:n="library"})=>{const[s,l]=i.useState([]),[t,d]=i.useState([]),[c,o]=i.useState(n),[m,v]=i.useState(null),[k,D]=i.useState(!0),[_,g]=i.useState(!1),[b,j]=i.useState(null),h=t.length>0?t.length<=50:s.length<=50;i.useEffect(()=>{(async()=>{try{const L=["/tech_documents/data/documents.json","/data/documents.json","./data/documents.json"];let p=null;for(const w of L)try{const x=await fetch(w);if(x.ok){p=await x.json();break}}catch(x){console.warn(`Failed to load from ${w}:`,x)}p?l(p):(console.error("Could not load documents from any path"),l([]))}catch(r){console.error("Error loading documents:",r),l([])}finally{D(!1)}})()},[]),i.useEffect(()=>{typeof window<"u"&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/tech_documents/sw.js").then(r=>{console.log("Service Worker registered:",r)}).catch(r=>{console.warn("Service Worker registration failed:",r)})},[]);const C=a=>a.map(r=>({...r,title:r.title||r.filename,authors:r.authors||[],content_preview:r.content_preview||r.summary.substring(0,200)+"..."})),S=a=>{v(a);const r=s.find(f=>f.id===a.id);r&&(j(r),g(!0))},E=()=>{g(!1),j(null)},I=a=>{},G=()=>{o("graph")},O=a=>{const r=`https://raw.githubusercontent.com/lonardonifabio/tech_documents/main/${a}`;return`https://mozilla.github.io/pdf.js/web/viewer.html?file=${encodeURIComponent(r)}`},P=a=>`https://github.com/lonardonifabio/tech_documents/blob/main/${a}`;return k?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("div",{className:"text-lg text-gray-600",children:"Loading document library..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center py-4 gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"AI & Data Science Document Library"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:[s.length," documents â€¢ Interactive knowledge graph powered by AI"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>o("library"),className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors ${c==="library"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"ðŸ“š Library View"}),e.jsx("span",{className:"sm:hidden",children:"ðŸ“š Library"})]}),e.jsxs("button",{onClick:()=>o("graph"),disabled:!h,className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors ${c==="graph"?"bg-white text-gray-900 shadow-sm":h?"text-gray-600 hover:text-gray-900":"text-gray-400 cursor-not-allowed"}`,title:h?"Open Knowledge Graph":`Knowledge Graph unavailable (${t.length>0?t.length:s.length} results > 50 limit)`,children:[e.jsxs("span",{className:"hidden sm:inline",children:["ðŸ•¸ï¸ Knowledge Graph",!h&&e.jsxs("span",{className:"ml-1 text-xs",children:["(",t.length>0?t.length:s.length,"/50)"]})]}),e.jsxs("span",{className:"sm:hidden",children:["ðŸ•¸ï¸ Graph",!h&&e.jsxs("span",{className:"ml-1 text-xs",children:["(",t.length>0?t.length:s.length,"/50)"]})]})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c==="library"?e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsx(B,{onKnowledgeGraphClick:G,onFilteredDocumentsChange:d})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>o("library"),className:"flex items-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-800 transition-colors",children:"â† Back to Library"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing knowledge graph for ",t.length>0?t.length:s.length," documents",t.length>0&&t.length!==s.length&&e.jsxs("span",{className:"text-gray-400",children:[" (filtered from ",s.length," total)"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Interactive Knowledge Graph"}),e.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Explore document relationships based on AI-generated embeddings. Documents are clustered by topic and connected by semantic similarity.",e.jsxs("span",{className:"block mt-2 text-blue-600 font-medium",children:["ðŸ“Š Input: ",s.length," documents from search results"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Node size = File size"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Colors = AI-detected topics"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-8 h-0.5 bg-gray-400"}),e.jsx("span",{children:"Links = Semantic similarity"})]})]})]}),m&&e.jsxs("div",{className:"ml-6 p-4 bg-gray-50 rounded-lg max-w-sm",children:[e.jsx("h3",{className:"font-medium text-sm mb-2",children:"Selected Document:"}),e.jsx("p",{className:"text-sm font-semibold mb-1",children:m.title}),e.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:[m.summary.substring(0,100),"..."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:O(m.filepath),target:"_blank",rel:"noopener noreferrer",className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"View PDF"}),e.jsx("a",{href:P(m.filepath),target:"_blank",rel:"noopener noreferrer",className:"text-xs border border-gray-300 text-gray-700 px-2 py-1 rounded hover:bg-gray-50",children:"GitHub"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6",children:e.jsx(W,{fallback:e.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800 mb-3",children:[e.jsx("span",{className:"text-lg",children:"âš ï¸"}),e.jsx("h3",{className:"font-semibold",children:"Knowledge Graph Error"})]}),e.jsx("p",{className:"text-red-700 text-sm mb-4",children:"The knowledge graph failed to load. This might be due to:"}),e.jsxs("ul",{className:"text-red-700 text-sm mb-4 list-disc list-inside",children:[e.jsx("li",{children:"Ollama not running locally (required for AI embeddings)"}),e.jsx("li",{children:"CORS configuration issues"}),e.jsx("li",{children:"Large dataset processing errors"}),e.jsx("li",{children:"Browser compatibility issues"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>typeof window<"u"?window.location.reload():void 0,className:"px-4 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Reload Page"}),e.jsx("button",{onClick:()=>o("library"),className:"px-4 py-2 border border-red-300 text-red-700 text-sm rounded hover:bg-red-50 transition-colors",children:"Back to Library"})]})]}),children:e.jsx(H,{documents:C(t.length>0?t:s),width:typeof window<"u"?Math.min(window.innerWidth-100,1e3):1e3,height:typeof window<"u"?Math.min(window.innerHeight-300,700):700,onNodeClick:S,onNodeHover:I})})}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"How to Use the Knowledge Graph"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"ðŸ–±ï¸ Interactions:"}),e.jsxs("ul",{className:"space-y-1 text-blue-700",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Click"})," nodes to open document preview popup"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Hover"})," to see document previews"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Drag"})," nodes to reposition them"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Scroll"})," to zoom in/out"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"ðŸŽ¯ Features:"}),e.jsxs("ul",{className:"space-y-1 text-blue-700",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Category filtering"})," to focus on specific areas"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Tag filtering"})," based on available keywords"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Topic filtering"})," by AI-detected themes"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Semantic connections"})," show related documents"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Offline support"})," via service worker caching"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"AI-powered"})," topic detection and clustering"]})]})]})]})]})]})}),e.jsx("footer",{className:"bg-white border-t mt-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-sm text-gray-600",children:[e.jsx("div",{children:e.jsxs("p",{children:["Powered by"," ",e.jsx("a",{href:"https://d3js.org/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"D3.js"})," ","and"," ",e.jsx("a",{href:"https://ollama.ai/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Ollama"})," ","â€¢ Built with"," ",e.jsx("a",{href:"https://astro.build/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Astro"})," ","and"," ",e.jsx("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"React"})]})}),e.jsx("div",{className:"mt-2 md:mt-0",children:e.jsx("p",{children:"Interactive Knowledge Graph â€¢ Bundle size optimized â€¢ Works offline"})})]})})}),b&&e.jsx(z,{doc:b,isOpen:_,onClose:E})]})};export{U as default};
